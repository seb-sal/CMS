<h2>Companies main page</h2>

<h2><%= link_to 'New Company', new_company_path %></h2>

<h3>
    <!-- When submit the form, the view rendered will be the index view of our articles resource -->
  <%= form_tag(companies_path, :method => "get", class: "navbar-form inline-form", id: "search-form") do %>
    <div class="input-append">
      <%= text_field_tag :search, params[:search], class: "span2", placeholder: "Type company name" %>
      <!-- In order to have the "search" icon int the button, we need to use plain HTML instead
           of using a Rails form helper -->
      <button class="btn" type="submit"><i class="icon-search"></i>Search</button>
    </div>
  <% end %>
  <%= button_to "Clear", companies_path, method: :get, form_class: "inline-form" %>
</h3>


<table>
  <thead>
    <tr>
      <th>Id</th>
      <th>Company Name</th>
<!--       <th>Contact Name</th> -->
      <th>Company Size</th>
      <th>Company Type</th>
      <th>Telephone</th>
      <th>Email</th>
      <th>Website</th>
      <th>City</th>
      <th>State</th>
      <th>Country</th>

      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @companies.each do |company| %>
      <tr>
        <td><%= company.count %></td>
        <td><%= company.company_name %></td>
<!--         <% if company.company_contacts.length > 0 %>
          <td><%= company.company_contacts[0].name %></td>
        <% else %>
          <td>None</td>
        <% end %> -->
        <td><%= company.company_size %></td>
        <td><%= company.company_type %></td>
        <td><%= company.telephone %></td>
        <td><%= company.email %></td>
        <td><%= company.website_uri %></td>
        <td><%= company.city %></td>
        <td><%= company.state %></td>
        <td><%= company.country %></td>
        <td><%= link_to 'Details', company_path(company) %></td>
        <td><%= link_to 'Edit', edit_company_path(company) %></td>
        <td>
          <%= button_to "Delete", { action: "destroy", :controller => :companies, id: company.id },
          method: :delete, data: { confirm: "Are you sure?" } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>

<h4>Upload .csv file</h4>
  <p>
  <%= form_tag import_companies_path, multipart: true do %>
    <%= file_field_tag :file %>
    <%= submit_tag "Import CSV" %>
  <% end %>
</p>

<!--
  <h5>Download:</h5>
  <p>
  <%= link_to "CSV", companies_path(format: "csv") %> |
  <%= link_to "Excel", companies_path(format: "xls") %>
</p>
 -->



